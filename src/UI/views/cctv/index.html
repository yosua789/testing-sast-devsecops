{%- extends "layout/base.html" -%}
{%- block content -%}


<div class="container-fluid py-4">
    <div class="d-flex justify-content-end">
        <a class="btn btn-orange mb-0 d-flex align-items-center py-1 me-2" href="/cctv/scan"><i
                class="custom-icon ic-cctv-2"></i> CCTV Scan</a>
        <a class="btn btn-orange mb-0 d-flex align-items-center py-1 me-2" href="/cctv/scan-nvr"><i
                class="custom-icon ic-cctv-2"></i> NVR Scan</a>
        <a class="btn btn-primary mb-0 d-flex align-items-center" href="/cctv/add-data"><i
                class="fas fa-plus me-2"></i>
            Manualy Add</a>
    </div>
    <div class="row my-4">
        <div class="col-lg-12 col-md-12 mb-md-0 mb-4">
            <div class="card">
                <div class="card-header pb-0">
                    <div class="row">
                        <div class="col-lg-6 col-7">
                            <h6>CCTV List</h6>
                        </div>
                    </div>
                </div>
                <div class="card-body px-4 pb-2">
                    <div class="table-responsive">
                        <table class="table align-items-center mb-0">
                            <thead>
                                <tr>
                                    <th class="text-secondary text-sm font-weight-bolder opacity-7">CCTV Name
                                    </th>
                                    <th
                                        class="text-secondary text-center text-sm font-weight-bolder opacity-7 ps-2">
                                        Enable
                                        Service
                                    </th>
                                    <th class="text-secondary text-sm font-weight-bolder opacity-7 ps-2">Status
                                    </th>
                                    <th
                                        class="text-secondary text-sm font-weight-bolder opacity-7 ps-2 text-center">
                                        Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for data in cctv %}
                                <tr>
                                    <td>
                                        <div class=" d-flex px-3 py-1">
                                            <h6 class="mb-0 text-sm fw-normal">{{data.name}} </h6>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-check form-switch ps-0 d-flex justify-content-center">
                                            <input class="form-check-input" type="checkbox" id="enableService_{{data.id}}" onclick="serviceCctv('{{data.id}}')"
                                             {%if data.enabled == 1 %} checked {%endif%} >
                                        </div>
                                    </td>
                                    <td class="">
                                        {% if data.enabled == 1 %}
                                            {% if data.status == 1 %}
                                                <span class="text-sm text-success">Online</span>
                                            {% else %}
                                                <span class="text-sm text-danger">Offline</span>
                                            {%endif%}
                                        {%else%}
                                            <span class="text-sm text-danger">inActive</span>
                                        {%endif%}                                            


                                    </td>
                                    <td class="d-flex justify-content-center align-middle">
                                        <a href="/cctv/update/{{data.id}}"
                                            class="btn btn-warning rounded text-white py-1 px-2 mx-2"><i
                                                class=" fas fa-edit"></i></a> |
                                        <a href="/cctv/delete/{{data.id}}" class="btn btn-danger rounded text-white py-1 px-2 mx-2"><i
                                                class=" fas fa-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                {%endfor%}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</main>
{%- endblock -%}
{%- block extrajs -%}
<script>
    function serviceCctv(id){
        if (!id){
            alert('error')
        }
        var tmp = document.getElementById('enableService_'+id)

        // if (tmp.checked){
        //     console.log('haii')
        // }else{
        //     console.log('memek')
        // }

        $.get('/api/v1/cctv/enable_service/'+id,function(res) {
            if(res.status != 200){
                alert(res.message)
            }
        })
        

    }
</script>
{%- endblock -%}

